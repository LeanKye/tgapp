(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=s(t);fetch(t.href,r)}})();class a{constructor(){this.tg=null,this.currentPage=this.detectCurrentPage(),this.init()}init(){window.Telegram?.WebApp?this.setupTelegramWebApp():window.addEventListener("load",()=>{setTimeout(()=>{this.setupTelegramWebApp()},100)})}setupTelegramWebApp(){this.tg=window.Telegram.WebApp,this.tg.ready(),this.tg.expand(),this.tg.disableVerticalSwipes(),this.tg.setHeaderColor("#000000"),this.setupUIBehavior(),this.updateTelegramHeader()}setupUIBehavior(){document.addEventListener("contextmenu",e=>{e.preventDefault()}),document.addEventListener("dragstart",e=>{e.preventDefault()}),document.addEventListener("selectstart",e=>{e.target.tagName!=="INPUT"&&e.target.tagName!=="TEXTAREA"&&e.preventDefault()})}detectCurrentPage(){const e=window.location.pathname;return new URLSearchParams(window.location.search),e.includes("category.html")?"categories":e.includes("product.html")?"product":e.includes("info.html")?"info":"home"}updateTelegramHeader(){if(!this.tg){console.log("Telegram WebApp: tg object not available");return}console.log("Telegram WebApp: Current page detected as:",this.currentPage),this.currentPage==="home"?(console.log("Telegram WebApp: Home page - hiding buttons"),this.tg.BackButton.hide(),this.tg.MainButton.hide()):(console.log("Telegram WebApp: Non-home page - showing back button"),this.tg.MainButton.hide(),this.tg.BackButton.show(),this.tg.BackButton.offClick(),this.tg.BackButton.onClick(()=>{window.location.href="./"}))}}window.telegramWebApp=null;document.addEventListener("DOMContentLoaded",()=>{window.telegramWebApp=new a});
